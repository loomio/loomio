.motion
  .row
    .span4.motion-header-info
      .clearfix
        %h3.motion-title.word-break= motion.name
        - if motion.closed?
          %span.label.label-important= t(:closed)
      #closing-info
        - if motion.voting?
          = t(:proposal_closing_when, when: time_ago_in_words(motion.closing_at))
        - else
          - if action_name != 'show_print'
            %span= t(:proposal_closed_when, when: time_ago_in_words(motion.closed_at))
          - else
            %span= t(:proposal_closed_when_print, when: motion.closed_at.to_date)
      .proposed-by
        - if action_name != 'show_print'
          = t(:proposed_when_by_who, when: time_ago_in_words(motion.created_at), who: motion.author_name)
        - else
          = t(:proposed_when_by_who_print, when: motion.created_at.to_date, who: motion.author_name)
    .span2.motion-admin-buttons
      = render '/motions/admin_buttons', motion: motion unless motion.closed?
  .row
    .span5
      =render "motions/outcome_statement", motion: motion, this_group: this_group if motion.closed?

  .row
    .span5
      .description
        .long-description
          = render_rich_text(motion.description, false)

  .pie{id: "graph_#{motion.id}"}
  .percentage-to-vote
    - if motion.closed?
      = t(:engagement_on_closed_proposal, percent: motion.percent_voted, :numerator => (motion.group_size_when_voting - motion.members_not_voted_count), denominator:  motion.group_size_when_voting)
    - else
      = t(:engagement_on_open_proposal, percent: motion.percent_voted, :numerator => (motion.group_size_when_voting - motion.members_not_voted_count), denominator:  motion.group_size_when_voting)

  .votes
    - if display_vote_buttons?(motion, current_user)
      %h3= t :state_your_position
      .vote-buttons.clearfix
        =link_to image_tag("hand-yes.png", :title => t(:yes_position), :alt => t(:yes_position)),
                 new_motion_vote_path(motion_id: motion.id, position: 'yes'),
                 "title" => t(:yes_position), "data-content" => t(:yes_details),
                 class: "position btn vote-yes", id: "yes-vote"
        =link_to image_tag("hand-abstain.png", :title => t(:abstain_position), :alt => t(:abstain_position)),
                 new_motion_vote_path(motion_id: motion.id, position: 'abstain'),
                 "title" => t(:abstain_position), "data-content" => t(:abstain_details),
                 class: "position btn vote-abstain", id: "abstain-vote"
        =link_to image_tag("hand-no.png", :title => t(:no_position), :alt => t(:no_position)),
                 new_motion_vote_path(motion_id: motion.id, position: 'no'),
                 "title" => t(:no_position), "data-content" => t(:no_details),
                 class: "position btn vote-disagree", id: "no-vote"
        =link_to image_tag("hand-block.png", :title => t(:block_position), :alt => t(:block_position)),
                 new_motion_vote_path(motion_id: motion.id, position: 'block'),
                 "title" => t(:block_position), "data-content" => t(:block_details),
                 class: "position btn vote-block", id: "block-vote"

    .votes-table= render "motions/votes_table", motion: motion

  = render('motions/motion_pie_javascript',
      diameter: 200,
      motion: motion,
      padding: 0,
      gap: 5,
      legend: 'true')
