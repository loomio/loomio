%li{:id => membership.user_id}
  - if group.can_be_edited_by?(current_user)
    #editable-user-row
      - if membership.user_name
        = membership.user_name
      - else
        = membership.user_email
      - if current_user.is_group_admin?(group)
        %span#membership-admin-functions
          =link_to "edit", edit_membership_path(membership), class: 'btn btn-mini'
          =link_to "remove", membership, method: :delete, class: 'btn btn-mini',
            confirm: "Are you sure you wish to remove #{membership.user_email} from the group?"
  - else
    #uneditable-user
      - if membership.user_name
        = membership.user_name
      - else
        = membership.user_email
