- description_markdown_setting ||= false
.description-container
  .description-body
    - too_long = true if model.description && model.description.length > 500

    <!--[if IE 7]>
    .long-description.model-description
      ~ conditional_markdown(description_markdown_setting, model.description)
    <![endif]-->

    <!--[if !IE 7]><!-->
    .short-description.model-description
      ~ conditional_markdown(description_markdown_setting, truncate(model.description, length: 500, omission: '...', separator: ' '))
    .long-description.model-description{style: "display: none"}
      ~ conditional_markdown(description_markdown_setting, model.description)
    = link_to t(:show_more), "#", class: 'see-more' if too_long
    <!--<![endif]-->

    - if can? :edit_description, model
      = link_to t(:edit_model_info, which_model: model_name), "#", class: "edit-description edit-#{model_name}-description", id: 'edit_description'

  - if can? :edit_description, model
    = form_tag send("edit_description_#{model_name}_path", model), :id => "description-edit-form", :class => "hidden", :remote => true do |f|
      = hidden_field_tag 'id'
      .control-group
        - class_str = 'inputError limit-250' if model_name == "group"
        = text_area_tag 'description', model.description, {id: 'description-input', class: class_str, :autofocus => true }
        - unless model_name == "discussion"
          .character-counter
      .save-buttons.clearfix
        = submit_tag t(:save), class: 'btn btn-small btn-grey run-validations', id: 'add-description-submit', :data => {:disable_with => t(:saving)}
        = link_to t(:cancel), "#", id: 'cancel-add-description'
