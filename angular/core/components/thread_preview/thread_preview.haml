.thread-preview
  %a.thread-preview__link{lmo-href-for: "$ctrl.thread"}
    .thread-preview__icon
      %user_avatar{ng-if: "!$ctrl.thread.activeProposal()", user: "$ctrl.thread.author()", size: "medium"}
      .thread-preview__pie-container{ng-if: "$ctrl.thread.activeProposal()"}
        %pie_chart.thread-preview__pie-canvas{votes: "$ctrl.thread.activeProposal().voteCounts", ng-if: "$ctrl.lastVoteByCurrentUser()", title: "{{ 'dashboard_page.thread_preview.you_voted' | translate:translationData() }}"}
        %pie_chart.thread-preview__pie-canvas{votes: "$ctrl.thread.activeProposal().voteCounts", ng-if: "!$ctrl.lastVoteByCurrentUser()", title: "{{ 'dashboard_page.thread_preview.undecided' | translate }}"}
        .thread-preview__position-icon-container
          .thread-preview__position-icon{ng-if: "$ctrl.lastVoteByCurrentUser()", class: "$ctrl.thread-preview__position-icon--{{$ctrl.lastVoteByCurrentUser().position}} "}
          .thread-preview__undecided-icon{ng-if: "!$ctrl.lastVoteByCurrentUser()"}
            %i.fa.fa-question

    .sr-only
      %span {{$ctrl.thread.authorName()}}: {{$ctrl.thread.title}}.
      %span{ng-if: "$ctrl.thread.hasUnreadActivity()", translate: "dashboard_page.aria_thread.unread", translate-value-count: "{{ $ctrl.thread.unreadActivityCount() }}"}
      %span{ng-if: "$ctrl.thread.activeProposal()", translate: "dashboard_page.aria_thread.current_proposal", translate-value-name: "{{ $ctrl.thread.activeProposal().name }}"}
      %span{ng-if: "$ctrl.thread.activeProposal() && $ctrl.lastVoteByCurrentUser()", translate: "dashboard_page.aria_thread.you_voted", translate-value-position: " {{$ctrl.lastVoteByCurrentUser().position}} "}

    .thread-preview__screen-only.screen-only{aria-hidden: "true"}
      .thread-preview__text-container
        .thread-preview__title{ng-class: "{'thread-preview--unread': $ctrl.thread.isUnread() }"}
          {{$ctrl.thread.title}}
        .thread-preview__unread-count{ng-if: "$ctrl.thread.hasUnreadActivity()"}
          ({{$ctrl.thread.unreadActivityCount()}})

      .thread-preview__text-container{ng-if: "$ctrl.thread.activeProposal()"}
        .thread-preview__proposal-name> {{ $ctrl.thread.activeProposal().name }}
        .thread-preview__proposal-closing-container{ng-if: "$ctrl.thread.activeProposal().closingSoon()"}
          %proposal_closing_time.thread-preview__proposal-closing-at{proposal: "$ctrl.thread.activeProposal()"}>

      .thread-preview__text-container
        .thread-preview__group-name
          {{ $ctrl.thread.group().fullName }} Â·
          %smart_time{time: "$ctrl.thread.lastActivityAt"}>

      %outlet{name: "after-thread-preview", model: "$ctrl.thread"}

  .thread-preview__star
    %star_toggle{thread: "$ctrl.thread", aria-hidden: "true"}

  .thread-preview__actions.hidden-xs{ng-if: "$ctrl.thread.discussionReaderId"}
    %button.thread-preview__mark-as-read{ng-click: "$ctrl.thread.markAsRead()", ng-class: "{disabled: !$ctrl.thread.isUnread()}", title: "{{'dashboard_page.mark_as_read' | translate }}"}>
      %i.fa.fa-check>
    %button.thread-preview__mute{ng-click: "$ctrl.changeVolume('mute')", ng-show: "!$ctrl.thread.isMuted()", title: "{{ 'volume_levels.mute' | translate }}" }>
      %i.fa.fa-volume-off
      %i.fa.fa-times>
    %button.thread-preview__mute{ng-click: "$ctrl.changeVolume('normal')", ng-show: "$ctrl.thread.isMuted()", title: "{{ 'volume_levels.unmute' | translate }}"}>
      %i.fa.fa-volume-down>
